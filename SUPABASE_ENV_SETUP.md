# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Timeweb Cloud

## ‚ùå –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–í –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞ –≤–∏–¥–Ω–∞ –æ—à–∏–±–∫–∞:
```
ERROR: Supabase client not initialized. Messages not saved!
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è **`SUPABASE_URL`** –∏ **`SUPABASE_KEY`** –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –≤ Timeweb Cloud.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à–∏ Supabase credentials

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ [Supabase Dashboard](https://supabase.com/dashboard)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API**
3. –ù–∞–π–¥–∏—Ç–µ:
   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://xxxxx.supabase.co`)
   - **anon/public key** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `eyJhbGc...`)

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Timeweb Cloud

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Timeweb Cloud Dashboard**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç **telegram-parser-backend**
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"**
4. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"**
5. –î–æ–±–∞–≤—å—Ç–µ –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   | –ù–∞–∑–≤–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
   |----------|----------|
   | `SUPABASE_URL` | –í–∞—à Project URL –∏–∑ Supabase |
   | `SUPABASE_KEY` | –í–∞—à anon key –∏–∑ Supabase |

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

1. –í Timeweb Cloud –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç **telegram-parser-backend**
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å"** –∏–ª–∏ **"Restart"**
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **"–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"** –≤ Timeweb Cloud
2. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   Initializing Supabase client...
   URL: https://xxxxx.supabase.co
   Supabase client initialized successfully!
   Supabase connection verified!
   ```

3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä —Å–Ω–æ–≤–∞ - —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ Supabase ‚úÖ

---

## üìä –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞)

–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `messages` –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ—ë –≤ Supabase Dashboard:

### SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã:

```sql
CREATE TABLE messages (
  id BIGSERIAL PRIMARY KEY,
  message_time TIMESTAMPTZ NOT NULL,
  chat_name TEXT NOT NULL,
  user_id BIGINT,
  first_name TEXT,
  last_name TEXT,
  username TEXT,
  bio TEXT,
  profile_link TEXT,
  message TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
CREATE INDEX idx_messages_time ON messages(message_time DESC);

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —á–∞—Ç—É
CREATE INDEX idx_messages_chat ON messages(chat_name);

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ user_id
CREATE INDEX idx_messages_user_id ON messages(user_id);
```

### –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL –≤ Supabase:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –í—Å—Ç–∞–≤—å—Ç–µ SQL –∫–æ–¥ –≤—ã—à–µ
4. –ù–∞–∂–º–∏—Ç–µ **Run** –∏–ª–∏ **Ctrl+Enter**

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –ü–æ–ª—É—á–µ–Ω—ã `SUPABASE_URL` –∏ `SUPABASE_KEY` –∏–∑ Supabase Dashboard
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Timeweb Cloud (telegram-parser-backend ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [ ] –ë—ç–∫–µ–Ω–¥ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –≤ Timeweb Cloud
- [ ] –¢–∞–±–ª–∏—Ü–∞ `messages` —Å–æ–∑–¥–∞–Ω–∞ –≤ Supabase (–µ—Å–ª–∏ –µ—ë –Ω–µ –±—ã–ª–æ)
- [ ] –í –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞ –≤–∏–¥–Ω–æ "Supabase client initialized successfully!"
- [ ] –ü–∞—Ä—Å–µ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Supabase

---

## üÜï –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: –ö–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞ –ø–æ—è–≤–∏–ª–∞—Å—å **–∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞**:

- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–∞—Ä—Å–µ—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ **"–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"**
- –ù–∞–∂–∞–≤ –Ω–∞ –Ω–µ—ë, –ø–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

---

**–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω—ã **–¢–û–ß–ù–û** —Ç–∞–∫: `SUPABASE_URL` –∏ `SUPABASE_KEY`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ)
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ

