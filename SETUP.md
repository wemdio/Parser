# Пошаговая инструкция по настройке

## Шаг 1: Установка зависимостей

### Python Backend:
```bash
pip install -r requirements.txt
```

### Node.js Frontend:
```bash
cd frontend
npm install
```

## Шаг 2: Настройка Supabase

1. Перейдите на https://supabase.com и создайте новый проект
2. Дождитесь завершения создания проекта
3. В боковом меню выберите **SQL Editor**
4. Скопируйте содержимое файла `database/schema.sql` и выполните его
5. Перейдите в **Settings** → **API**
6. Скопируйте **Project URL** и **anon/public key**

## Шаг 3: Получение Telegram API credentials

1. Откройте https://my.telegram.org в браузере
2. Введите свой номер телефона (с кодом страны, например +79991234567)
3. Подтвердите вход через код из Telegram
4. Перейдите в раздел **API development tools**
5. Заполните форму создания приложения:
   - App title: любое название (например, "My Parser")
   - Short name: короткое название (например, "parser")
   - Platform: Desktop
   - Description: можно оставить пустым
6. Скопируйте **api_id** и **api_hash**

## Шаг 4: Создание файла .env

В корне проекта создайте файл `.env` со следующим содержимым:

```
SUPABASE_URL=https://ваш-проект.supabase.co
SUPABASE_KEY=ваш_ключ_из_supabase
```

## Шаг 5: Запуск приложения

### Запуск Backend (терминал 1):
```bash
python run_backend.py
```

Вы должны увидеть сообщение:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### Запуск Frontend (терминал 2):
```bash
cd frontend
npm start
```

Откроется браузер на http://localhost:3000

## Шаг 6: Использование приложения

1. **Добавление аккаунта:**
   - Нажмите "Добавить аккаунт"
   - Введите API ID, API Hash и номер телефона
   - После нажатия "Добавить" вам придет код в Telegram
   - Введите код в появившуюся форму
   - Если включена 2FA, введите пароль

2. **Выбор чатов:**
   - Выберите подключенный аккаунт из списка
   - Дождитесь загрузки списка чатов
   - Отметьте нужные чаты для парсинга
   - Нажмите "Сохранить выбор"

3. **Запуск парсинга:**
   - Нажмите "Запустить парсинг"
   - Парсер начнет собирать сообщения за последний час
   - Автоматический парсинг будет запускаться каждый час

## Проверка работы

1. После запуска парсинга проверьте таблицу `messages` в Supabase:
   - Перейдите в **Table Editor** в Supabase
   - Выберите таблицу `messages`
   - Вы должны увидеть сохраненные сообщения

## Устранение проблем

### Ошибка "SUPABASE_URL and SUPABASE_KEY must be set"
- Убедитесь, что файл `.env` создан в корне проекта
- Проверьте правильность значений переменных

### Ошибка подключения к Telegram
- Проверьте правильность API ID и API Hash
- Убедитесь, что номер телефона указан с кодом страны (например, +7...)

### Чаты не загружаются
- Убедитесь, что аккаунт успешно подключен
- Проверьте, что аккаунт состоит в группах/каналах

### Сообщения не сохраняются
- Проверьте подключение к Supabase
- Убедитесь, что таблица `messages` создана правильно
- Проверьте логи backend в терминале

