# Решение проблем с добавлением аккаунта Telegram

## Типичные ошибки и решения

### 1. "Invalid phone number"
**Причина:** Неправильный формат номера телефона  
**Решение:** 
- Используйте формат с кодом страны: `+79991234567`
- Убедитесь, что номер начинается с `+`
- Примеры правильных форматов: `+79991234567`, `+1234567890`

### 2. "Invalid API ID or API Hash"
**Причина:** Неверные API credentials  
**Решение:**
1. Перейдите на https://my.telegram.org
2. Войдите с вашим номером телефона
3. Перейдите в раздел "API development tools"
4. Создайте новое приложение или используйте существующее
5. Скопируйте **api_id** (число) и **api_hash** (строка из 32 символов)

### 3. "Too many requests" / "Flood wait"
**Причина:** Слишком много запросов к Telegram API  
**Решение:** 
- Подождите 5-10 минут перед повторной попыткой
- Не пытайтесь добавить несколько аккаунтов подряд быстро

### 4. "Failed to create client" / "Connection error"
**Причина:** Проблемы с подключением или сессией  
**Решение:**
1. Проверьте интернет-соединение
2. Удалите старые файлы сессий из папки `sessions/` (если они есть)
3. Перезапустите backend: `python run_backend.py`

### 5. "Account with this phone number already exists"
**Причина:** Аккаунт с таким номером уже добавлен  
**Решение:**
- Если аккаунт был добавлен ранее, он должен автоматически подключиться
- Проверьте список аккаунтов в интерфейсе

### 6. Ошибка при вводе кода подтверждения
**Причина:** Неверный код или истекшее время действия  
**Решение:**
- Введите код точно как показано в Telegram (обычно 5 цифр)
- Код действителен ограниченное время (обычно несколько минут)
- Если код истек, начните процесс заново

## Проверка настроек

### Проверьте правильность данных:

1. **API ID:** Должно быть число (например: `12345678`)
2. **API Hash:** Должно быть строка из 32 символов (например: `0123456789abcdef0123456789abcdef`)
3. **Номер телефона:** Формат `+79991234567` (с кодом страны)

### Проверьте консоль backend:

Если ошибка не ясна из интерфейса, посмотрите логи в терминале где запущен `python run_backend.py`

### Проверьте консоль браузера:

1. Откройте Developer Tools (F12)
2. Перейдите на вкладку Console
3. Посмотрите на ошибки при попытке добавить аккаунт

## Пошаговая диагностика

1. **Убедитесь, что backend запущен:**
   ```bash
   python run_backend.py
   ```
   Должно быть: `INFO:     Uvicorn running on http://0.0.0.0:8000`

2. **Проверьте подключение к API:**
   Откройте в браузере: http://localhost:8000
   Должно показать: `{"message":"Telegram Parser API"}`

3. **Проверьте формат данных:**
   - API ID: только цифры
   - API Hash: 32 символа (буквы и цифры)
   - Номер: начинается с `+`

4. **Попробуйте перезапустить backend:**
   Остановите (Ctrl+C) и запустите снова

## Если ничего не помогает

1. Удалите папку `sessions/` (она создастся заново)
2. Удалите файл `accounts.json` (он создастся заново)
3. Перезапустите backend
4. Попробуйте добавить аккаунт снова

