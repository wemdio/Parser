# üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `parsing_logs` –≤ Supabase:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ [Supabase Dashboard](https://supabase.com/dashboard)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor** (–≤ –ª–µ–≤–æ–º –º–µ–Ω—é)
3. –ù–∞–∂–º–∏—Ç–µ **New query**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `database/parsing_logs_schema.sql`
5. –ù–∞–∂–º–∏—Ç–µ **Run** (–∏–ª–∏ F5)
6. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: **Success. No rows returned**

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Table Editor**
2. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–∞ **parsing_logs**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏:
   - `id` (BIGSERIAL)
   - `parsing_session_id` (UUID)
   - `started_at` (TIMESTAMPTZ)
   - `finished_at` (TIMESTAMPTZ)
   - `phone_number` (TEXT)
   - `chat_id` (BIGINT)
   - `chat_name` (TEXT)
   - `messages_found` (INTEGER)
   - `messages_saved` (INTEGER)
   - `messages_skipped` (INTEGER)
   - `status` (TEXT)
   - `error_type` (TEXT)
   - `error_message` (TEXT)
   - `hours_back` (INTEGER)
   - `execution_time_seconds` (FLOAT)
   - `created_at` (TIMESTAMPTZ)

## –®–∞–≥ 3: –î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
git add .
git commit -m "Add parsing statistics feature"
git push origin main
```

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### Backend:
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `parsing_logs` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `telegram_service.py` –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `parser_service.py` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ù–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä `/api/stats` —Å —ç–Ω–¥–ø–æ–π–Ω—Ç–∞–º–∏:
  - `GET /api/stats/parsing-stats` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
  - `GET /api/stats/parsing-sessions` - —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π
  - `GET /api/stats/parsing-stats/errors` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

### Frontend:
- ‚úÖ –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (`/stats`)
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ParsingStats` —Å –∫—Ä–∞—Å–∏–≤—ã–º UI
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ (–ì–ª–∞–≤–Ω–∞—è / –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- ‚úÖ React Router –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:

üìä **–°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –ø–∞—Ä—Å–∏–Ω–≥–∞:**
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –°–∫–æ–ª—å–∫–æ —á–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–ª–æ—Å—å
- –°–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω–æ
- –°—Ç–∞—Ç—É—Å (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞/–ø—Ä–æ–ø—É—â–µ–Ω–æ)

üîç **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É —á–∞—Ç—É:**
- –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞ –∏ ID
- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
- –ù–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–æ–ø—É—â–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –¢–∏–ø –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –±—ã–ª–∞)
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫:
- ‚è≥ **FLOOD_WAIT** - Rate limit (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥—ë–º)
- üö´ **PeerIdInvalid** - –ß–∞—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–∫–∏–∫–Ω—É–ª–∏/—É–¥–∞–ª—ë–Ω)
- ‚ùå **Other** - –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç—ç–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –í –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
3. –£–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—É—Å–∫–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
4. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±—É—é –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π
5. –í —Ç–∞–±–ª–∏—Ü–µ —É–≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞–∂–¥–æ–º—É —á–∞—Ç—É

## –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
